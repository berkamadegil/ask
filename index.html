<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aşk Sitemiz</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.24.7/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Raleway:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* Önceki stilleri koruyoruz */
    @keyframes gradientAnimation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .animated-border {
      position: relative;
      z-index: 0;
    }
    .animated-border::before {
      content: '';
      position: absolute;
      top: -12px;
      left: -12px;
      right: -12px;
      bottom: -12px;
      background: linear-gradient(270deg, #f472b6, #ffffff, #f472b6);
      background-size: 400% 400%;
      animation: gradientAnimation 10s ease infinite;
      z-index: -1;
      border-radius: 12px;
    }
    /* Oyun için yeni stiller */
    .game-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #e0f7fa;
      display: none;
      flex-direction: column;
      z-index: 100;
    }
    .game-canvas {
      flex-grow: 1;
      background-color: #e0f7fa;
      position: relative;
      overflow: hidden;
    }
    .game-controls {
      display: flex;
      justify-content: space-between;
      padding: 15px;
      background-color: #f8f9fa;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    }
    .game-btn {
      padding: 10px 20px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    .game-btn-primary {
      background-color: #6c5ce7;
      color: white;
      border: none;
    }
    .game-btn-primary:hover {
      background-color: #5649c0;
    }
    .game-btn-secondary {
      background-color: #dfe6e9;
      color: #2d3436;
      border: none;
    }
    .game-btn-secondary:hover {
      background-color: #b2bec3;
    }
    .game-score {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 1.5rem;
      font-weight: bold;
      color: #2d3436;
      background-color: rgba(255, 255, 255, 0.7);
      padding: 10px 20px;
      border-radius: 50px;
    }
    .game-highscore {
      position: absolute;
      top: 60px;
      right: 20px;
      font-size: 1rem;
      color: #2d3436;
      background-color: rgba(255, 255, 255, 0.7);
      padding: 8px 15px;
      border-radius: 50px;
    }
    .game-character {
      position: absolute;
      width: 60px;
      height: 60px;
      bottom: 0;
      left: 50px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="30" r="25" fill="%23fdcb6e"/><circle cx="40" cy="25" r="3" fill="%23633b1f"/><circle cx="60" cy="25" r="3" fill="%23633b1f"/><path d="M45 40 Q50 45 55 40" stroke="%23633b1f" stroke-width="2" fill="none"/><ellipse cx="35" cy="60" rx="15" ry="20" fill="%23fdcb6e"/><ellipse cx="65" cy="60" rx="15" ry="20" fill="%23fdcb6e"/><ellipse cx="50" cy="65" rx="20" ry="25" fill="%23fdcb6e"/></svg>');
      background-size: contain;
      background-repeat: no-repeat;
    }
    .game-obstacle {
      position: absolute;
      width: 50px;
      height: 50px;
      bottom: 0;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M20 80 L80 80 L70 50 L60 20 L40 20 L30 50 Z" fill="%232d3436"/><circle cx="40" cy="40" r="5" fill="%23d63031"/><circle cx="60" cy="40" r="5" fill="%23d63031"/><path d="M45 55 Q50 60 55 55" stroke="%23ffffff" stroke-width="2" fill="none"/></svg>');
      background-size: contain;
      background-repeat: no-repeat;
    }
    .game-obstacle.flying {
      bottom: 100px;
    }
    .game-ground {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 20px;
      background-color: #00b894;
    }
    .game-cloud {
      position: absolute;
      width: 100px;
      height: 50px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 50"><ellipse cx="25" cy="25" rx="20" ry="15" fill="%23ffffff" opacity="0.8"/><ellipse cx="50" cy="20" rx="25" ry="20" fill="%23ffffff" opacity="0.8"/><ellipse cx="75" cy="25" rx="20" ry="15" fill="%23ffffff" opacity="0.8"/></svg>');
      background-size: contain;
      background-repeat: no-repeat;
    }
    .game-gameover {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(255, 255, 255, 0.9);
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
      display: none;
    }
    .game-gameover h2 {
      font-size: 2rem;
      color: #d63031;
      margin-bottom: 20px;
    }
    .game-newrecord {
      color: #6c5ce7;
      font-weight: bold;
      font-size: 1.2rem;
      margin-bottom: 15px;
      display: none;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // Önceki kodlar aynen kalıyor...
    // Sadece GalleryPage ve MainLayout componentlerini güncelliyoruz

    function BunnyGame() {
      const [gameStarted, setGameStarted] = useState(false);
      const [gameOver, setGameOver] = useState(false);
      const [score, setScore] = useState(0);
      const [highScore, setHighScore] = useState(0);
      const [newRecord, setNewRecord] = useState(false);
      
      const gameRef = useRef(null);
      const characterRef = useRef(null);
      const gameOverRef = useRef(null);
      const newRecordRef = useRef(null);
      
      let gameSpeed = 5;
      let isJumping = false;
      let isDucking = false;
      let gravity = 0.9;
      let timerId;
      let obstacles = [];
      let clouds = [];
      let scoreInterval;
      let lastObstacleTime = 0;
      
      // Oyunu başlat
      const startGame = () => {
        setGameStarted(true);
        setGameOver(false);
        setScore(0);
        setNewRecord(false);
        
        // Karakteri başlangıç pozisyonuna getir
        characterRef.current.style.bottom = '0px';
        characterRef.current.style.transform = 'scale(1)';
        
        // Engelleri temizle
        obstacles.forEach(obs => obs.element.remove());
        obstacles = [];
        
        // Bulutları temizle
        clouds.forEach(cloud => cloud.element.remove());
        clouds = [];
        
        // Oyun döngüsünü başlat
        gameLoop();
        
        // Skor artışını başlat
        scoreInterval = setInterval(() => {
          setScore(prev => {
            const newScore = prev + 1;
            // Her 100 puanda hızı artır
            if (newScore % 100 === 0) {
              gameSpeed += 0.5;
            }
            return newScore;
          });
        }, 100);
      };
      
      // Oyunu durdur
      const stopGame = () => {
        setGameStarted(false);
        clearInterval(timerId);
        clearInterval(scoreInterval);
      };
      
      // Oyunu sıfırla
      const resetGame = () => {
        stopGame();
        startGame();
      };
      
      // Oyun döngüsü
      const gameLoop = () => {
        // Karakter hareketi
        let character = characterRef.current;
        let characterBottom = parseInt(character.style.bottom) || 0;
        
        // Yerçekimi
        if (characterBottom < 0) {
          character.style.bottom = '0px';
          characterBottom = 0;
          isJumping = false;
        } else if (isJumping) {
          character.style.bottom = (characterBottom - 5) + 'px';
        } else if (characterBottom > 0) {
          character.style.bottom = (characterBottom - 5 * gravity) + 'px';
        }
        
        // Engelleri hareket ettir
        obstacles.forEach((obstacle, index) => {
          let obstacleLeft = parseInt(obstacle.element.style.left);
          obstacle.element.style.left = (obstacleLeft - gameSpeed) + 'px';
          
          // Engelin ekrandan çıkıp çıkmadığını kontrol et
          if (obstacleLeft < -50) {
            obstacle.element.remove();
            obstacles.splice(index, 1);
          }
          
          // Çarpışma kontrolü
          if (
            obstacleLeft < 100 && 
            obstacleLeft > 50 &&
            characterBottom < (obstacle.isFlying ? 100 : 50) &&
            !isDucking
          ) {
            gameOverAction();
          }
        });
        
        // Bulutları hareket ettir
        clouds.forEach((cloud, index) => {
          let cloudLeft = parseInt(cloud.element.style.left);
          cloud.element.style.left = (cloudLeft - gameSpeed/2) + 'px';
          
          if (cloudLeft < -100) {
            cloud.element.remove();
            clouds.splice(index, 1);
          }
        });
        
        // Rastgele engel oluştur
        if (Date.now() - lastObstacleTime > 2000 + Math.random() * 2000) {
          createObstacle();
          lastObstacleTime = Date.now();
        }
        
        // Rastgele bulut oluştur
        if (Math.random() > 0.98 && clouds.length < 5) {
          createCloud();
        }
        
        timerId = requestAnimationFrame(gameLoop);
      };
      
      // Engel oluştur
      const createObstacle = () => {
        const obstacle = document.createElement('div');
        obstacle.className = 'game-obstacle ' + (Math.random() > 0.5 ? 'flying' : '');
        obstacle.style.left = '100%';
        gameRef.current.appendChild(obstacle);
        
        obstacles.push({
          element: obstacle,
          isFlying: obstacle.classList.contains('flying')
        });
      };
      
      // Bulut oluştur
      const createCloud = () => {
        const cloud = document.createElement('div');
        cloud.className = 'game-cloud';
        cloud.style.left = '100%';
        cloud.style.top = (50 + Math.random() * 100) + 'px';
        gameRef.current.appendChild(cloud);
        
        clouds.push({
          element: cloud
        });
      };
      
      // Zıplama fonksiyonu
      const jump = () => {
        if (!isJumping && !isDucking) {
          isJumping = true;
          setTimeout(() => {
            isJumping = false;
          }, 800);
        }
      };
      
      // Eğilme fonksiyonu
      const duck = () => {
        if (!isJumping && !isDucking) {
          isDucking = true;
          characterRef.current.style.transform = 'scale(0.7)';
          setTimeout(() => {
            isDucking = false;
            characterRef.current.style.transform = 'scale(1)';
          }, 1000);
        }
      };
      
      // Oyun bittiğinde yapılacaklar
      const gameOverAction = () => {
        setGameOver(true);
        stopGame();
        
        // Yeni rekor kontrolü
        if (score > highScore) {
          setHighScore(score);
          setNewRecord(true);
          localStorage.setItem('bunnyHighScore', score);
        }
      };
      
      // Klavye kontrolleri
      useEffect(() => {
        const handleKeyDown = (e) => {
          if (!gameStarted) return;
          
          if (e.key === ' ' || e.key === 'ArrowUp') {
            jump();
          } else if (e.key === 'ArrowDown') {
            duck();
          }
        };
        
        window.addEventListener('keydown', handleKeyDown);
        return () => window.removeEventListener('keydown', handleKeyDown);
      }, [gameStarted]);
      
      // Yüksek skoru yükle
      useEffect(() => {
        const savedHighScore = localStorage.getItem('bunnyHighScore');
        if (savedHighScore) {
          setHighScore(parseInt(savedHighScore));
        }
      }, []);
      
      return (
        <div className="game-container" ref={gameRef} style={{ display: gameStarted || gameOver ? 'flex' : 'none' }}>
          <div className="game-canvas">
            <div className="game-character" ref={characterRef}></div>
            <div className="game-ground"></div>
            <div className="game-score">Skor: {score}</div>
            <div className="game-highscore">En Yüksek: {highScore}</div>
            
            <div className="game-gameover" ref={gameOverRef} style={{ display: gameOver ? 'block' : 'none' }}>
              <h2>Oyun Bitti!</h2>
              <div className="game-newrecord" ref={newRecordRef} style={{ display: newRecord ? 'block' : 'none' }}>
                Yeni Rekor! 🎉
              </div>
              <p>Skorun: {score}</p>
              <button 
                className="game-btn game-btn-primary" 
                onClick={resetGame}
                style={{ marginTop: '20px' }}
              >
                Tekrar Dene
              </button>
            </div>
          </div>
          
          <div className="game-controls">
            <button className="game-btn game-btn-secondary" onClick={() => document.querySelector('.game-container').style.display = 'none'}>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
              </svg>
            </button>
            <div>
              <button className="game-btn game-btn-primary" onClick={gameStarted ? stopGame : startGame}>
                {gameStarted ? 'Durdur' : 'Başlat'}
              </button>
              {gameOver && (
                <button className="game-btn game-btn-primary" onClick={resetGame} style={{ marginLeft: '10px' }}>
                  Yeniden Başlat
                </button>
              )}
            </div>
          </div>
        </div>
      );
    }

    function GalleryPage({ openModal, startPreview, endPreview }) {
      const [showGame, setShowGame] = useState(false);
      
      return (
        <>
          <div className="flex-1 flex justify-center py-8 px-0 md:ml-48">
            <div className="w-full sm:w-11/12 md:w-3/5 bg-white rounded-lg shadow-xl animated-border">
              <div className="p-4 sm:p-6 md:p-8 right-gap-grid">
                {/* Diğer fotoğraflar... */}
                
                {/* Oyun karesi */}
                <div 
                  className="fade-up w-full cursor-pointer" 
                  onClick={() => setShowGame(true)}
                >
                  <div className="photo-container">
                    <div className="bg-gradient-to-br from-blue-100 to-purple-200 h-32 sm:h-40 md:h-48 rounded-lg aspect-square flex items-center justify-center">
                      <div className="text-center">
                        <div className="text-4xl">🐰</div>
                        <div className="text-xl font-bold mt-2 text-purple-700">Tavşankoş</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          {showGame && <BunnyGame />}
        </>
      );
    }

    // MainLayout ve diğer componentler öncekiyle aynı kalıyor
    // Sadece GalleryPage'i güncellenmiş haliyle kullanıyoruz

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
